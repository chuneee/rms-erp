{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { AUTH_TOKEN } from 'constants/AuthConstant';\nimport AuthService from 'services/AuthService';\nexport const initialState = {\n  loading: false,\n  message: '',\n  showMessage: false,\n  redirect: '',\n  token: localStorage.getItem(AUTH_TOKEN) || null\n};\nexport const signIn = createAsyncThunk('auth/login', async (data, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  const {\n    email,\n    password\n  } = data;\n\n  try {\n    const response = await AuthService.login({\n      email,\n      password\n    });\n    const token = response.token;\n    localStorage.setItem(AUTH_TOKEN, token);\n    return {\n      token,\n      message: response.message\n    };\n  } catch (err) {\n    var _err$response, _err$response$data;\n\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Error');\n  }\n});\nexport const signUp = createAsyncThunk('auth/register', async (data, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  const {\n    email,\n    password\n  } = data;\n\n  try {\n    const response = await AuthService.register({\n      email,\n      password\n    });\n    const token = response.token;\n    localStorage.setItem(AUTH_TOKEN, token);\n    return {\n      token,\n      message: response.message\n    };\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Error');\n  }\n});\nexport const signOut = createAsyncThunk('auth/logout', async () => {\n  localStorage.removeItem(AUTH_TOKEN);\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    authenticated: (state, action) => {\n      state.loading = false;\n      state.redirect = '/';\n      state.token = action.payload;\n    },\n    showAuthMessage: (state, action) => {\n      state.message = action.payload;\n      state.showMessage = true;\n      state.loading = false;\n    },\n    hideAuthMessage: state => {\n      state.message = '';\n      state.showMessage = false;\n    },\n    signOutSuccess: state => {\n      state.loading = false;\n      state.token = null;\n      state.redirect = '/';\n    },\n    showLoading: state => {\n      state.loading = true;\n    },\n    signInSuccess: (state, action) => {\n      state.loading = false;\n      state.token = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(signIn.pending, state => {\n      state.loading = true;\n    }).addCase(signIn.fulfilled, (state, action) => {\n      state.loading = false;\n      state.redirect = '/';\n      state.token = action.payload.token;\n      state.message = action.payload.message;\n      state.showMessage = true;\n    }).addCase(signIn.rejected, (state, action) => {\n      state.message = action.payload;\n      state.showMessage = true;\n      state.loading = false;\n    }).addCase(signOut.fulfilled, state => {\n      state.loading = false;\n      state.token = null;\n      state.redirect = '/';\n    }).addCase(signUp.pending, state => {\n      state.loading = true;\n    }).addCase(signUp.fulfilled, (state, action) => {\n      state.loading = false;\n      state.redirect = '/';\n      state.token = action.payload.token;\n      state.message = action.payload.message;\n      state.showMessage = true;\n    }).addCase(signUp.rejected, (state, action) => {\n      state.message = action.payload;\n      state.showMessage = true;\n      state.loading = false;\n    });\n  }\n});\nexport const {\n  authenticated,\n  showAuthMessage,\n  hideAuthMessage,\n  signOutSuccess,\n  showLoading,\n  signInSuccess\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","AUTH_TOKEN","AuthService","initialState","loading","message","showMessage","redirect","token","localStorage","getItem","signIn","data","rejectWithValue","email","password","response","login","setItem","err","signUp","register","signOut","removeItem","authSlice","name","reducers","authenticated","state","action","payload","showAuthMessage","hideAuthMessage","signOutSuccess","showLoading","signInSuccess","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["/Users/chune/Documents/RMS Geoespacial/ERP/Emilus - React Admin Template/starter/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { AUTH_TOKEN } from 'constants/AuthConstant';\r\nimport AuthService from 'services/AuthService';\r\n\r\nexport const initialState = {\r\n  loading: false,\r\n  message: '',\r\n  showMessage: false,\r\n  redirect: '',\r\n  token: localStorage.getItem(AUTH_TOKEN) || null,\r\n};\r\n\r\nexport const signIn = createAsyncThunk('auth/login', async (data, { rejectWithValue }) => {\r\n  const { email, password } = data;\r\n  try {\r\n    const response = await AuthService.login({ email, password });\r\n    const token = response.token;\r\n    localStorage.setItem(AUTH_TOKEN, token);\r\n    return { token, message: response.message };\r\n  } catch (err) {\r\n    return rejectWithValue(err.response?.data?.message || 'Error');\r\n  }\r\n});\r\n\r\nexport const signUp = createAsyncThunk('auth/register', async (data, { rejectWithValue }) => {\r\n  const { email, password } = data;\r\n  try {\r\n    const response = await AuthService.register({ email, password });\r\n    const token = response.token;\r\n    localStorage.setItem(AUTH_TOKEN, token);\r\n    return { token, message: response.message };\r\n  } catch (err) {\r\n    return rejectWithValue(err.response?.data?.message || 'Error');\r\n  }\r\n});\r\n\r\nexport const signOut = createAsyncThunk('auth/logout', async () => {\r\n  localStorage.removeItem(AUTH_TOKEN);\r\n});\r\n\r\nexport const authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    authenticated: (state, action) => {\r\n      state.loading = false;\r\n      state.redirect = '/';\r\n      state.token = action.payload;\r\n    },\r\n    showAuthMessage: (state, action) => {\r\n      state.message = action.payload;\r\n      state.showMessage = true;\r\n      state.loading = false;\r\n    },\r\n    hideAuthMessage: (state) => {\r\n      state.message = '';\r\n      state.showMessage = false;\r\n    },\r\n    signOutSuccess: (state) => {\r\n      state.loading = false;\r\n      state.token = null;\r\n      state.redirect = '/';\r\n    },\r\n    showLoading: (state) => {\r\n      state.loading = true;\r\n    },\r\n    signInSuccess: (state, action) => {\r\n      state.loading = false;\r\n      state.token = action.payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(signIn.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(signIn.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.redirect = '/';\r\n        state.token = action.payload.token;\r\n        state.message = action.payload.message;\r\n        state.showMessage = true;\r\n      })\r\n      .addCase(signIn.rejected, (state, action) => {\r\n        state.message = action.payload;\r\n        state.showMessage = true;\r\n        state.loading = false;\r\n      })\r\n      .addCase(signOut.fulfilled, (state) => {\r\n        state.loading = false;\r\n        state.token = null;\r\n        state.redirect = '/';\r\n      })\r\n      .addCase(signUp.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(signUp.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.redirect = '/';\r\n        state.token = action.payload.token;\r\n        state.message = action.payload.message;\r\n        state.showMessage = true;\r\n      })\r\n      .addCase(signUp.rejected, (state, action) => {\r\n        state.message = action.payload;\r\n        state.showMessage = true;\r\n        state.loading = false;\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  authenticated,\r\n  showAuthMessage,\r\n  hideAuthMessage,\r\n  signOutSuccess,\r\n  showLoading,\r\n  signInSuccess,\r\n} = authSlice.actions;\r\n\r\nexport default authSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}